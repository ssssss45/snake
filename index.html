
<html>
  <head>
    <title>Snake</title>
    <link href="styles/normalize.css" rel="stylesheet" type="text/css"/>
    <link href="styles/styles.css" rel="stylesheet" type="text/css"/>
    <script src="src/pixi.min.js"></script>
    <script src="src/pixi-sound.js"></script>
    <script src="src/pixi-particles.js"></script>
    <script src="js/game.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/keyboard-controller.js"></script>
    <script src="js/state-machine.js"></script>
    <script src="js/asset-manager.js"></script>
    <script src="js/sound-manager.js"></script>
    <script src="js/tail.js"></script>
    <meta charset="utf-8"/>
  </head>
  <body>
    <button class="pause-button" onclick="pause()">пауза</button>
    <button class="new-game-button" onclick="newGame()">Новая игра</button>
    <progress class="loading-progress"></progress>
    <div class="score-container">Счёт: 0</div>
    <div class="pause-message">Пауза</div>
    <div class="welcome-message">Змейка</div>
    <div class="game-over-message">Game Over!</div>
    <div class="final-score"></div>
    <div class="loading-message">Загрузка...</div>
    <script>
      var game = new Game({
        gameWidth : 30,
        gameHeight : 20,
        blockSize : 30,
        gameSpeed : 100,
        framesPerStep : 11,
        animationFps : 50,
        startX : 10,
        startY : 7,
        initialTail : 2,
        initialDirection : 2,
      
        spriteData : {
          spriteSize : 64,
          turnSprite : {x : 0, y : 0},
          bonusSprite : {x : 0, y : 3},
          headSprite : {x : 4, y : 0},
          straigntSprite : {x : 1, y : 0},
          tailSprite : {x : 4, y : 2},
        },
      
        scoreContainer: "score-container",
        gameOverMessage : "game-over-message",
        welcomeMessage : "welcome-message",
        finalScore : "final-score",
        pauseButton : "pause-button",
        pauseMessage : "pause-message",
        camButton : "cam-button",
        newGameButton : "new-game-button",
        loadingMessage : "loading-message",
        loadingProgress : "loading-progress",
      
        backgroundTexture : "assets/img/bg.jpg",
        collisionCameraJump : 1000,
      
      sound_manager_data :
      {
          soundLoadedEventName: "Snake-game:sounds-loaded",
          sounds:   
          [
              {
                  id: 0,
                  files: ["assets/sound/bonus.mp3"],
                  playEvent: ["Snake-game: bonus taken"],
                  playRandom: true
              },
              {
                  id: 1,
                  files: ["assets/sound/game over.mp3"],
                  playEvent: ["Snake-game: game over"],
                  playRandom: true
              },
              {
                  id: 2,
                  files: ["assets/sound/music.mp3"],
                  playEvent: ["Snake-game: new game"],
                  stopEvent: ["Snake-game: game over"],
                  playRandom: true,
                  loop: true
              }
          ]
      },
      
      images : 
      {
          spritesheet : "assets/img/spritesheet.png",
          ground : "assets/img/Ground.png",
          wall : "assets/img/Wall.png",
          particle: "assets/img/particle.png",
      },
      
      bonusEmitter :
      {
        "alpha": {
          "start": 1,
          "end": 0
        },
        "scale": {
          "start": 0.1,
          "end": 0.01,
          "minimumScaleMultiplier": 1
        },
        "color": {
          "start": "#ff0000",
          "end": "#fccc83"
        },
        "speed": {
          "start": 50,
          "end": 50,
          "minimumSpeedMultiplier": 1
        },
        "acceleration": {
          "x": 0,
          "y": 0
        },
        "maxSpeed": 0,
        "startRotation": {
          "min": 0,
          "max": 360
        },
        "noRotation": false,
        "rotationSpeed": {
          "min": 0,
          "max": 0
        },
        "lifetime": {
          "min": 1,
          "max": 2
        },
        "blendMode": "normal",
        "frequency": 0.001,
        "emitterLifetime": 0.1,
        "maxParticles": 100,
        "pos": {
          "x": 0,
          "y": 0
        },
        "addAtBack": false,
        "spawnType": "circle",
        "spawnCircle": {
          "x": 0,
          "y": 0,
          "r": 0
        }
      },
      
      collisionEmitter :{
        "alpha": {
          "start": 1,
          "end": 0
        },
        "scale": {
          "start": 0.1,
          "end": 0.01,
          "minimumScaleMultiplier": 1
        },
        "color": {
          "start": "#ffe100",
          "end": "#ff0000"
        },
        "speed": {
          "start": 700,
          "end": 1000,
          "minimumSpeedMultiplier": 1
        },
        "acceleration": {
          "x": 0,
          "y": 0
        },
        "maxSpeed": 0,
        "startRotation": {
          "min": 0,
          "max": 360
        },
        "noRotation": false,
        "rotationSpeed": {
          "min": 0,
          "max": 0
        },
        "lifetime": {
          "min": 1,
          "max": 2
        },
        "blendMode": "normal",
        "frequency": 0.001,
        "emitterLifetime": 0.1,
        "maxParticles": 100,
        "pos": {
          "x": 0,
          "y": 0
        },
        "addAtBack": false,
        "spawnType": "circle",
        "spawnCircle": {
          "x": 0,
          "y": 0,
          "r": 0
        }
      }
      
      });
      
      function pause()
      {
          var event = new CustomEvent("Snake-game:pause-pressed");
          document.dispatchEvent(event);
      }
      
      function newGame()
      {
          var event = new CustomEvent("Snake-game:new-game");
          document.dispatchEvent(event);
      }
    </script>
  </body>
</html>